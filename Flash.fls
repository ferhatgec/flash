/> MIT License
#
# Copyright (c) 2020 Ferhat Geçdoğan All Rights Reserved.
# Distributed under the terms of the MIT License.
# 
</

/> Check version of FlaScript (Required latest version) </
except(version) : 0.3 -> { error("Install new version of FlaScript") print(newline) } version;

import("Types.flsh") -> _defs <-
import("Tools.flsh") -> tools <- 
import("HelpFunction.flsh") -> help <-

func -> Execute() {
	/> Get reference of input word */
	executepp("FlaSh", var(input_word))
} Execute;

#help_function ->
	if[var(input_word) == "help"] -> {
		put[help -> func -> HelpFunction() <-]
	} else -> {
		/> Call Execute() (another command) </	
		func -> Execute()
	} <-
#help_function <-

#uptime ->
	if[var(input_word) == "uptime"] -> {
		put[tools -> func -> Uptime() <-]
	} else -> {
		statement[#help_function]
	} <-
#uptime <-

#check_version ->
	if[var(input_word) == "version"] -> {
		put[help -> func -> VersionFunction() <-]
	} else -> { statement[#uptime] } <-
#check_version <-

#exit ->
	if[var(input_word) == "exit"] -> {
		print(string) -> "Bye.."
		
		put[_defs -> Slashn <-]
		
		exit(success)
	} else -> { statement[#check_version] } <-
#exit <-

#check_command ->
	if[var(input_word) == "username"] -> {
		print(spec) -> __USERNAME__ <-
		put[_defs -> Slashn <-]
	} else -> {
		statement[#exit]		
	} <-
#check_command <-

#buffer_loop ->
	while[var(int) -> loopVal <- (==) var(int) -> 3.14 <-] -> {
		func -> TerminalBuffer()
		
		/> Colorize input */
		print(rcolorized[:1, 92:])
		
		/> Get input </
		@input -> input_word <
		
		/> Colorize output </
		print(rcolorized[:1, 31:])
		
		/> Check inputted value </
		statement[#check_command]
	} else -> {
		print(string) -> "Failed."
	} <-
#buffer_loop <-


func -> TerminalBuffer() {
	print(rcolorized[:11, 96:])
	print(spec) -> __USERNAME__ <-
	
	print(rcolorized[:11, 92:])
	
	print(string) -> "~>"
	
	print(rcolorized[:11, 93:])
	print(spec) -> __HOSTNAME__ <-

	print(string) -> " ~"
		
	print(rcolorized[:11, 94:])
	@echo -> current_dir <-
	
	print(rcolorized[:11, 97:])
	
	put[_defs -> Input_Sign <-]
	
	print(string) -> " "
	
} TerminalBuffer;
	
main() -> main {
        func -> Welcome() : tools <
	var(int) -> 3.14 -> loopVal <-
	var(string) -> blah blah -> input_word <- 
	var(string) -> (func) getenv -> "PWD" (end) -> current_dir <- 
	
	statement[#buffer_loop]
	
	put[_defs -> Slashn <-]
} main;
